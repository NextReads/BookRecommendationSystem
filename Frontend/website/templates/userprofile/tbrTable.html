{% load static %}
{% include 'partials/_messages.html' %}
<form class="d-flex" role="search" method="POST" action="{%  url 'userProfile:search-in-tbr' %}">
  {% csrf_token %}
  <input type="hidden" name="current_page" value={{request.path}} />
  <input
    class="form-control mx-2"
    type="search"
    placeholder="Title/ISBN"
    aria-label="Search"
    name ="query"
  />
  <button class="btn btn-outline-success me-2" type="submit">
    Search
  </button>
</form>
<div class="table">
    <div class="table-header">Want to read</div>
    <table cellspacing="0">
      <tr>
        <th>Picture</th>
        <th>Name</th>
        <th>Genres</th>
        <th>Similar books</th>
        <th></th>
        <th>Delete</th>
      </tr>
      {% if books|length == 0 %}
      <tr>
        <td colspan="6" class="text-center">No books read yet</td>
      </tr>
    {% else %}
      {% for book in books %}
      <tr>
        <td>
          <img
            class="table-img"
            src="{{book.imageUrl}}"
            alt=""
          />
        </td>
        <td>{{book.title}}</td>
        <td>{% if book.genres %}{{book.genres}}{% else %}-{% endif %}</td>
        <td>
          <a href="{% url 'userProfile:book-details' book_id=book.id %}"class="btn btn-sm btn-outline-primary mt-2">View</a>
        </td>
        <td>
          <form method="POST" action="{% url 'userProfile:to-read-next' %}">
            {% csrf_token %}
            <input type="hidden" name="book_id" value="{{ book.id }}" />
            <button type = "submit" class="btn btn-sm btn-outline-primary mt-2">Read Next</button>
          </form>
        </td>
        <td>
          <a type ="button" class="btn btn-sm btn-outline-danger" href="{% url 'userProfile:delete-tbr' book_id=book.id %}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"/>
            <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
          </svg>
          </a>
        </td>
      </tr>
      {% endfor %}
    {% endif %}

    </table>
  </div>
</div>